{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DiagramSpec",
  "description": "Specification for a flowchart diagram, generated by an LLM, without layout information.",
  "type": "object",
  "properties": {
    "nodes": {
      "type": "array",
      "description": "The nodes of the diagram.",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the node."
          },
          "text": {
            "type": "string",
            "description": "The text content of the node.",
            "minLength": 1
          },
          "kind": {
            "type": "string",
            "description": "The type of the node.",
            "enum": ["start", "end", "process", "decision", "data", "note"]
          }
        },
        "required": ["id", "text", "kind"]
      },
      "maxItems": 40
    },
    "edges": {
      "type": "array",
      "description": "The edges connecting nodes.",
      "items": {
        "type": "object",
        "properties": {
          "from": {
            "type": "string",
            "description": "The ID of the source node."
          },
          "to": {
            "type": "string",
            "description": "The ID of the target node."
          },
          "text": {
            "type": "string",
            "description": "Optional label for the edge."
          }
        },
        "required": ["from", "to"]
      }
    },
    "groups": {
      "type": "array",
      "description": "Optional groupings of nodes.",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique identifier for the group."
          },
          "text": {
            "type": "string",
            "description": "Label for the group."
          },
          "node_ids": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": ["id", "text", "node_ids"]
      }
    },
    "style": {
      "type": "string",
      "description": "Optional style hint for the diagram."
    }
  },
  "required": ["nodes", "edges"]
}
